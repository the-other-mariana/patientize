<section>
    <script src="/javascripts/update-details.js"></script>
    <script>
        var now = new Date();
        var month = (now.getMonth() + 1);               
        var day = now.getDate();
        if (month < 10) 
            month = "0" + month;
        if (day < 10) 
            day = "0" + day;
        var today = now.getFullYear() + '-' + month + '-' + day + "T13:45";
        $('#rappointment').val(today);
        $('#pappointment').val(today);
    </script>

    <label class="btn btn-secondary" style="margin-bottom: 20px;">
        Details: {{ patientName }}
    </label>
    <div class="card" id="patientDetails" style="margin-bottom: 20px;">
        <div class="card-body">

            <h3 class="text-primary">Last Name, Name</h3>
            

            <p class="patient-gender">Gender</p>
            <p class="patient-mobile">Mobile</p>
            <p class="patient-email">Email</p>
            <p class="patient-birth">Birth Date</p>
            <p class="patient-age">Age</p>

        </div>
    </div>

    <div style="display: inline;">
        <label class="btn btn-secondary" style="margin-bottom: 20px;">
            Clinical Records
        </label>
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#recordModal" style="margin-bottom: 20px;">
        Add Record
        </button>
    </div>
    <div class="card" id="patientRecords" style="margin-bottom: 20px; ">
        <!-- RECORDS WHO HERE -->
        <div id="recordSection">

        </div>
    </div>

    <div style="display: inline;">
        <label class="btn btn-secondary" style="margin-bottom: 20px;">
            Medical Documents
        </label>
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#prescriptionModal" style="margin-bottom: 20px;">
        Prescription
        </button>
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#certificateModal" style="margin-bottom: 20px;">
        Certificate
        </button>
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#labrequestModal" style="margin-bottom: 20px;">
        Lab Request
        </button>
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#medreportModal" style="margin-bottom: 20px;">
        Med Report
        </button>
    </div>
    <div class="card" id="patientDocs" style="margin-bottom: 20px; ">
        <!-- DOCS WHO HERE -->
        <div id="docSection">

        </div>
    </div>

    <!-- TEMPLATES -->
    <div id="noRecordsLabel" style="display: none;">
        <label class="btn btn-light text-primary" style="margin: 0px; background-color: #f0f5fa;">
            No Clinical Records Yet
        </label>
    </div>
    <div id="noDocsLabel" style="display: none;">
        <label class="btn btn-light text-primary" style="margin: 0px; background-color: #f0f5fa;">
            No Documents Yet
        </label>
    </div>

    <!-- Modal RECORD -->
    <div class="modal fade bd-example-modal-lg" id="recordModal" tabindex="-1" role="dialog" aria-labelledby="recordModal" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title text-primary" id="exampleModalLongTitle">New Clinical Record</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <form action="/patient/addRecord" method="post" class="">
            <div class="modal-body">
                <div class = "input" >

                    <div class="form-group row">
                        <label for="rappointment" class="col-sm-4 col-form-label col-form-label-lg">Appointment: </label>
                        <div class="col-sm-8">
                            <input class="form-control" type="datetime-local" value="" id="rappointment" name="rappointment">
                        </div>
                    </div>

                    <label for = "rmotive" style = "display: block;"> Motive: </label>
                    <input type = "text" class="form-control" id = "rmotive" name = "rmotive">

                    <label for = "rresults" style = "display: block;"> Exploration Results: </label>
                    <textarea class="form-control" id="rresults" name="rresults" rows="3" style="margin-bottom: 10px;"></textarea>

                    <label for = "rdiagnosis" style = "display: block;"> Diagnosis: </label>
                    <input type = "text" class="form-control" id="rdiagnosis" name="rdiagnosis">

                    <label for = "rtreatment" style = "display: block;"> Treatment: </label>
                    <textarea class="form-control" id="rtreatment" name="rtreatment" rows="3" style="margin-bottom: 10px;"></textarea>
                    
                </div>
                <br/>
                <br/>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-light" data-dismiss="modal">Dismiss</button>
              <button type="submit" class="btn btn-primary">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- RECORD TEMPLATE -->
    <div id="recordTemplate" style="display: none;">
        <div class="card text-left" style="margin: 10px;">
            <div class="card-body">
                <form action='' method="get" class="cr-form">
                    <div style="display: inline;">
                        <h5 class="text-primary" style="color:blue; display: inline;">CR-Index: </h5>
                        <h5 class="cr-timestamp" style="display: inline">Date and Time</h5>
                    </div>

                    <div style="float: right; display: inline;">
                        <button type="button" class="btn btn-primary" style="margin-right: 5px;">Edit</button>
                        <button type="button" class="btn btn-danger" >Delete</button>
                    </div>
                </form>
                
            </div>
        </div>
    </div>
    <!-- PRESCRIPTION TEMPLATE -->
    <div id="prescriptionTemplate" style="display: none;">
        <div class="card text-left" style="margin: 10px;">
            <div class="card-body">
                <form action='' method="get" class="cr-form">
                    <div style="display: inline;">
                        <h5 class="text-primary" style="color:blue; display: inline;">PRESC-Index: </h5>
                        <h5 class="p-timestamp" style="display: inline">Date and Time</h5>
                    </div>
                    <div style="display: block;">
                    <h5 class="p-diagnosis">Diagnosis</h5>
                    </div>
                    <div style="float: right; display: inline;">
                        <button type="button" class="btn btn-secondary" style="margin-right: 5px;">Download</button>
                        <button type="button" class="btn btn-primary" style="margin-right: 5px;">Edit</button>
                        <button type="button" class="btn btn-danger" >Delete</button>
                    </div>
                </form>
                
            </div>
        </div>
    </div>

    <!-- Modal PRESCRIPTION -->
    <div class="modal fade bd-example-modal-lg" id="prescriptionModal" tabindex="-1" role="dialog" aria-labelledby="prescriptionModal" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title text-primary" id="exampleModalLongTitle">New Prescription</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <form action="/patient/addPrescription" method="post" class="">
            <div class="modal-body">
                <div class = "input" >

                    <div class="form-group row">
                        <label for="pappointment" class="col-sm-4 col-form-label col-form-label-lg">Appointment: </label>
                        <div class="col-sm-8">
                            <input class="form-control" type="datetime-local" value="" id="pappointment" name="pappointment">
                        </div>
                    </div>

                    <label for = "pdoctor" style = "display: block;"> Doctor: </label>
                    <input type = "text" class="form-control" id="pdoctor" name="pdoctor">

                    <label for = "pdgp" style = "display: block;"> DGP: </label>
                    <input type = "text" class="form-control" id="pdgp" name="pdgp">

                    <label for = "pdiagnosis" style = "display: block;"> Diagnosis: </label>
                    <input type = "text" class="form-control" id="pdiagnosis" name="pdiagnosis">

                    <label for = "pindications" style = "display: block;"> Indications: </label>
                    <textarea class="form-control" id="pindications" name="pindications" rows="3" style="margin-bottom: 10px;"></textarea>
                    
                </div>
                <br/>
                <br/>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-light" data-dismiss="modal">Dismiss</button>
              <button type="submit" class="btn btn-primary">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>

</section>