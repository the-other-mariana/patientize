<script>
    function validInput() {
        var name = document.getElementById("upname").value;
        var specialty= document.getElementById("upspecialty").value;
        var dgp = document.getElementById("updgp").value;
        var email = document.getElementById("upemail").value;
        var mobile = document.getElementById("upmobile").value;

        if (name == "") {
            $("#invalid-fullname").attr("style", "display: visible; color: crimson;");
            return false;
        }
        if (specialty == "") {
            $("#invalid-specialty").attr("style", "display: visible; color: crimson;");
            return false;
        }
        if (dgp == ""){
            $("#invalid-dgp").attr("style", "display: visible; color: crimson;");
            return false;
        }
        if (mobile == ""){
            $("#invalid-mobile").attr("style", "display: visible; color: crimson;");
            return false;
        }
        if (email == "") {
            $("#invalid-email-empty").attr("style", "display: visible; color: crimson;");
            return false;
        }
        if (!email.includes('@')){
            $("#invalid-email").attr("style", "display: visible; color: crimson;");
            return false;
        } else {
            var provider = email.split("@");
            if (provider[1].length == 0 || !provider[1].includes('.')){
                $("#invalid-email").attr("style", "display: visible; color: crimson;");
                return false;
            }
        }

        return true;
    }
</script>
<section>
    <script src="/javascripts/update-user.js"></script>
    <div class="card text-center" style="box-shadow: 0 0 10px 0 rgba(63, 140, 255, 0.438); border-radius: 10px;">
        <div class="card-header" style="display: inline;">
            <ul class="nav nav-tabs card-header-tabs">
                <li class="nav-item">
                    <a class="nav-link active" href="#">Profile</a>
                </li>
                <li class="nav-item">
                    <form action="/patients" method="post">
                    <button type="submit" class="btn btn-light">Patients</button>
                    </form>
                </li>
                <li class="nav-item">
                    <form action="/templates" method="post">
                    <button type="submit" class="btn btn-light">Templates</button>
                    </form>
                </li>
                <li class="nav-item ml-auto">
                    
                </li>
            </ul>
        </div>
      <div class="card-body">
        <!-- -->
          <div class="container">

            <div class="row">
                <div class="col">

                    <div class="container">

                    <div class="row">
                        <div class="col">

                        <div class="card bg-light" width="100%">
                            <img id="profilePic" src="" alt="your image" height=100% width=100%>
                            <div class="card-body">
                                <h5 id="user" class="card-title">{{ user }}</h5>
                                <p id="uname"></p>
                                <p id="uspecialty"></p>
                                <p id="udgp"></p>
                            </div>
                            
                        </div>

                        </div>
                    </div>

                    <div class="row">
                        <div class="col">

                        <div class="card bg-light" width="100%">
                            <div class="card-body">
                                <h5 class="card-title">Contact</h5>
                                <p id="uemail" class="card-text"></p>
                                <p id="umobile" class="card-text"></p>
                                <button type="button" class="btn btn-primary rounded-btn" data-toggle="modal" data-target="#contactModal">
                                    Edit Info
                                </button>
                            </div>
                        </div>

                        </div>
                    </div>

                    <div class="row">
                        <div class="col">
                            <form action="/logout" method="post">
                                <button type="submit" class="btn btn-danger rounded-btn" style="">Log Out</button>
                            </form>
                        </div>
                    </div>

                </div>

              </div>
              <div class="col-6">
                <div class="card text-left">
                    <div class="card-body">
                        <h5 class="card-title text-center">Your Information, {{ user }}</h5>
                    
                        <label for = "iusername" style = "display: block;"> Username: </label>
                        <input type = "text" class="form-control" id = "iusername" name = "iusername" disabled>

                        <label for = "iname" style = "display: block;"> Name: </label>
                        <input type = "text" class="form-control" id = "iname" name = "iname" disabled>

                        <label for = "ispecialty" style = "display: block;"> Specialty: </label>
                        <input type = "text" class="form-control" id = "ispecialty" name = "ispecialty" disabled>

                        <label for = "idgp" style = "display: block;"> DGP: </label>
                        <input type = "text" class="form-control" id = "idgp" name = "idgp" disabled>

                        <label for = "igender" style = "display: block;"> Gender: </label>
                        <input type = "text" class="form-control" id = "igender" name = "igender" disabled>

                        <label for = "iemail" style = "display: block;"> Email: </label>
                        <input type = "text" class="form-control" id = "iemail" name = "iemail" disabled>

                        <label for = "imobile" style = "display: block;"> Mobile: </label>
                        <input type = "text" class="form-control" id = "imobile" name = "imobile" disabled>

                        <label for = "ipatients" style = "display: block;"> Patients: </label>
                        <input type = "text" class="form-control" id = "ipatients" name = "ipatients" disabled>
                    </div>
                </div>

              </div>
              
              <div class="col">
                <img id="Ads" src="/uploads/ad-01.jpg" alt="your image" height=100% width=100%>
              </div>
            </div>
          </div>
        <!-- -->
      </div>
    </div>
    
  </section>
  <!-- Modal CONTACT -->
    <div class="modal fade" id="contactModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Edit Profile Info</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="/updateInfo" method="post">
                <div class="modal-body">
                    <div class = "input">
                        <label for = "upname" style = "display: block;"> Full Name: </label>
                        <input type = "text" class="form-control" id = "upname" name = "upname">
                    </div>
                    <small id="invalid-fullname" style="display: none;">
                        This is a mandatory field.
                    </small>
                    <div class = "input">
                        <label for = "upspecialty" style = "display: block;"> Specialty: </label>
                        <input type = "text" class="form-control" id = "upspecialty" name = "upspecialty">
                    </div>
                    <small id="invalid-specialty" style="display: none;">
                        This is a mandatory field.
                    </small>
                    <div class = "input">
                        <label for = "updgp" style = "display: block;"> DGP: </label>
                        <input type = "text" class="form-control" id = "updgp" name = "updgp">
                    </div>
                    <small id="invalid-dgp" style="display: none;">
                        This is a mandatory field.
                    </small>
                    <div class = "input">
                        <label for = "upemail" style = "display: block;"> Email: </label>
                        <input type = "text" class="form-control" id = "upemail" name = "upemail">
                    </div>
                    <small id="invalid-email-empty" style="display: none;">
                        This is a mandatory field.
                    </small>
                    <small id="invalid-email" style="display: none;">
                        Please provide a valid email address.
                    </small>
                    <div class = "input">
                        <label for = "upmobile" style = "display: block;"> Mobile: </label>
                        <input type = "text" class="form-control" id = "upmobile" name = "upmobile">
                    </div>
                    <small id="invalid-mobile" style="display: none;">
                        This is a mandatory field.
                    </small>
                    <br/>
                    <br/>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary rounded-btn" data-dismiss="modal">Dismiss</button>
                <button type="submit" class="btn btn-primary rounded-btn" onClick="return validInput()">Save</button>
                </div>
            </form>
            </div>
        </div>
    </div>